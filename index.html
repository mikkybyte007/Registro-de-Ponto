<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Ponto Pessoal - Miqu√©ias</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Adi√ß√£o para PWA: Link para o manifest.json -->
    <link rel="manifest" href="/Registro-de-Ponto/manifest.json">
    <!-- Adi√ß√£o para PWA: √çcone para iOS (Safari) -->
    <link rel="apple-touch-icon" href="/Registro-de-Ponto/apple-touch-icon.png">

    <style>
        :root {
            --bg-color-light: #f0f2f5;
            --text-color-light: #333;
            --card-bg-light: #ffffff;
            --border-color-light: #e0e0e0;
            --shadow-light: rgba(0, 0, 0, 0.08);

            --bg-color-dark: #1e1e1e;
            --text-color-dark: #f0f0f0;
            --card-bg-dark: #2a2a2a;
            --border-color-dark: #3a3a3a;
            --shadow-dark: rgba(0, 0, 0, 0.3);
        }

        /* Adi√ß√£o: box-sizing para melhor controle de layout */
        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 15px; /* Reduz padding para telas menores */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
            background-color: var(--bg-color-light);
            color: var(--text-color-light);
        }

        body.dark-mode {
            background-color: var(--bg-color-dark);
            color: var(--text-color-dark);
        }

        .container {
            background-color: var(--card-bg-light);
            border: 1px solid var(--border-color-light);
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow-light);
            padding: 20px; /* Reduz padding para telas menores */
            width: 100%;
            max-width: 600px; /* Ajusta max-width para melhor visualiza√ß√£o em mobile */
            margin-bottom: 15px; /* Reduz margin-bottom */
            transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        body.dark-mode .container {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            box-shadow: 0 4px 12px var(--shadow-dark);
        }

        h1 {
            text-align: center;
            color: var(--text-color-light);
            margin-bottom: 20px; /* Reduz margin-bottom */
            font-size: 1.8rem; /* Ajusta tamanho da fonte para mobile */
        }

        body.dark-mode h1 {
            color: var(--text-color-dark);
        }

        h2 {
            font-size: 1.4rem; /* Ajusta tamanho da fonte para mobile */
        }

        .form-group {
            margin-bottom: 10px; /* Reduz margin-bottom */
            display: flex;
            flex-direction: column;
            gap: 5px; /* Adiciona espa√ßamento entre label e input */
        }

        .form-group label {
            margin-bottom: 0; /* Removido, pois o gap j√° cuida */
            font-weight: 500;
            color: var(--text-color-light);
            font-size: 0.95rem; /* Ajusta tamanho da fonte */
        }

        body.dark-mode .form-group label {
            color: var(--text-color-dark);
        }

        .form-group input[type="date"],
        .form-group input[type="time"],
        .form-group input[type="number"] { /* Adicionado para inputs de n√∫mero */
            padding: 10px; /* Ajusta padding */
            border: 1px solid var(--border-color-light);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--card-bg-light);
            color: var(--text-color-light);
            transition: border-color 0.2s, background-color 0.2s, color 0.2s;
            -webkit-appearance: none; /* Remove estilo padr√£o de input em iOS */
            min-width: 100px; /* Garante largura m√≠nima para inputs de tempo no Safari */
        }

        body.dark-mode .form-group input {
            background-color: var(--bg-color-dark);
            border-color: var(--border-color-dark);
            color: var(--text-color-dark);
        }

        .form-group input:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);
        }

        .button-group {
            display: flex;
            flex-direction: column; /* Bot√µes empilhados em mobile */
            gap: 10px;
            margin-top: 15px; /* Reduz margin-top */
            justify-content: center;
        }

        @media (min-width: 480px) { /* A partir de telas um pouco maiores, volta a ser linha */
            .button-group {
                flex-direction: row;
            }
        }

        button {
            padding: 12px 20px; /* Aumenta padding para facilitar o toque */
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s, opacity 0.2s, box-shadow 0.2s;
            font-weight: 500;
            width: 100%; /* Ocupa largura total em mobile */
        }

        @media (min-width: 480px) {
            button {
                width: auto; /* Volta a largura autom√°tica em telas maiores */
            }
        }

        button.primary {
            background-color: #007aff;
            color: white;
            box-shadow: 0 2px 6px rgba(0, 122, 255, 0.2);
        }

        button.primary:hover {
            background-color: #005bb5;
            box-shadow: 0 4px 10px rgba(0, 122, 255, 0.3);
        }

        button.secondary {
            background-color: var(--border-color-light);
            color: var(--text-color-light);
        }

        body.dark-mode button.secondary {
            background-color: var(--border-color-dark);
            color: var(--text-color-dark);
        }

        button.secondary:hover {
            opacity: 0.8;
        }

        #data-entries {
            margin-top: 20px;
            width: 100%;
        }

        #data-entries h2 {
            text-align: center;
            margin-bottom: 15px;
            color: var(--text-color-light);
        }

        body.dark-mode #data-entries h2 {
            color: var(--text-color-dark);
        }

        .entry-card {
            background-color: var(--card-bg-light);
            border: 1px solid var(--border-color-light);
            border-radius: 10px;
            padding: 12px; /* Reduz padding */
            margin-bottom: 8px; /* Reduz margin-bottom */
            display: flex;
            flex-direction: column; /* Empilha informa√ß√µes em mobile */
            justify-content: space-between;
            align-items: flex-start; /* Alinha ao in√≠cio */
            box-shadow: 0 2px 8px var(--shadow-light);
            transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        body.dark-mode .entry-card {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            box-shadow: 0 2px 8px var(--shadow-dark);
        }

        .entry-info {
            flex-grow: 1;
            color: var(--text-color-light);
            font-size: 0.9rem; /* Ajusta tamanho da fonte */
            margin-bottom: 10px; /* Espa√ßamento entre info e a√ß√µes */
            line-height: 1.4; /* Melhora a legibilidade do texto */
            word-break: break-word; /* Permite quebra de palavras longas */
        }

        body.dark-mode .entry-info {
            color: var(--text-color-dark);
        }

        .entry-info strong {
            font-weight: 600;
        }

        .entry-actions {
            width: 100%; /* Ocupa largura total */
            text-align: right; /* Alinha bot√£o de lixeira √† direita */
        }

        .entry-actions button {
            background: none;
            border: none;
            color: #ff3b30;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            border-radius: 5px;
            width: auto; /* Bot√£o de lixeira n√£o ocupa largura total */
        }

        .entry-actions button:hover {
            background-color: rgba(255, 59, 48, 0.1);
        }

        .theme-toggle {
            position: static; /* Remove posicionamento absoluto em mobile */
            margin-bottom: 20px; /* Adiciona margem abaixo */
            background-color: var(--card-bg-light);
            border: 1px solid var(--border-color-light);
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-color-light);
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
            width: 100%;
            max-width: 600px; /* Alinha com os containers */
            text-align: center;
        }

        body.dark-mode .theme-toggle {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            color: var(--text-color-dark);
        }

        .theme-toggle:hover {
            opacity: 0.9;
        }

        @media (min-width: 768px) { /* Para tablets e desktops, volta ao posicionamento original */
            .theme-toggle {
                position: absolute;
                top: 20px;
                right: 20px;
                width: auto;
                max-width: none;
            }
            .entry-card {
                flex-direction: row; /* Volta a ser linha */
                align-items: center;
            }
            .entry-info {
                margin-bottom: 0;
            }
            .entry-actions {
                width: auto;
            }
        }

        #summary {
            margin-top: 20px;
            padding: 15px; /* Reduz padding */
            background-color: var(--card-bg-light);
            border: 1px solid var(--border-color-light);
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow-light);
            width: 100%;
            max-width: 600px;
            text-align: center;
            transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        body.dark-mode #summary {
            background-color: var(--card-bg-dark);
            border-color: var(--border-color-dark);
            box-shadow: 0 4px 12px var(--shadow-dark);
        }

        #summary p {
            margin: 5px 0;
            font-size: 1rem;
            color: var(--text-color-light);
        }

        body.dark-mode #summary p {
            color: var(--text-color-dark);
        }

        /* Estilos para os novos campos de toler√¢ncia */
        .tolerance-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color-light);
        }

        body.dark-mode .tolerance-group {
            border-color: var(--border-color-dark);
        }

        .tolerance-group .form-group {
            margin-bottom: 0; /* Ajusta margem para os grupos internos */
        }

        @media (min-width: 480px) {
            .tolerance-group {
                flex-direction: row;
                justify-content: space-around;
            }
            .tolerance-group .form-group {
                width: 48%; /* Divide o espa√ßo entre os dois campos */
            }
        }
    </style>
</head>
<body>
    <button id="themeToggle" class="theme-toggle">Modo Escuro</button>

    <div class="container">
        <h1>Controle de Ponto</h1>

        <div class="form-group">
            <label for="data">Data:</label>
            <input type="date" id="data" required>
        </div>

        <div class="form-group">
            <label for="entradaPrevista">Entrada Prevista:</label>
            <input type="time" id="entradaPrevista" value="08:00" required>
        </div>

        <div class="form-group">
            <label for="saidaPrevista">Sa√≠da Prevista:</label>
            <input type="time" id="saidaPrevista" value="17:00" required>
        </div>

        <div class="form-group">
            <label for="entradaReal">Entrada Real:</label>
            <input type="time" id="entradaReal" required>
        </div>

        <div class="form-group">
            <label for="saidaReal">Sa√≠da Real:</label>
            <input type="time" id="saidaReal" required>
        </div>

        <!-- Novos campos para toler√¢ncia -->
        <div class="tolerance-group">
            <div class="form-group">
                <label for="toleranciaEntrada">Toler√¢ncia Entrada (min):</label>
                <input type="number" id="toleranciaEntrada" value="10" min="0">
            </div>
            <div class="form-group">
                <label for="toleranciaSaida">Toler√¢ncia Sa√≠da (min):</label>
                <input type="number" id="toleranciaSaida" value="10" min="0">
            </div>
        </div>

        <div class="button-group">
            <button id="addEntryBtn" class="primary">Adicionar Registro</button>
            <button id="clearEntriesBtn" class="secondary">Limpar Todos</button>
            <button id="generateExcelBtn" class="secondary">Gerar Excel</button>
        </div>
    </div>

    <div id="data-entries" class="container">
        <h2>Registros</h2>
        <div id="entriesList">
            <!-- Registros ser√£o adicionados aqui pelo JavaScript -->
        </div>
    </div>

    <div id="summary" class="container">
        <h2>Resumo do Banco de Horas</h2>
        <p>Total Acumulado: <span id="totalBancoHoras">00:00</span></p>
    </div>

    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script>
        // Refer√™ncias aos elementos do DOM
        const dataInput = document.getElementById('data');
        const entradaPrevistaInput = document.getElementById('entradaPrevista');
        const saidaPrevistaInput = document.getElementById('saidaPrevista');
        const entradaRealInput = document.getElementById('entradaReal');
        const saidaRealInput = document.getElementById('saidaReal');
        const toleranciaEntradaInput = document.getElementById('toleranciaEntrada'); // Novo
        const toleranciaSaidaInput = document.getElementById('toleranciaSaida');   // Novo
        const addEntryBtn = document.getElementById('addEntryBtn');
        const clearEntriesBtn = document.getElementById('clearEntriesBtn');
        const generateExcelBtn = document.getElementById('generateExcelBtn');
        const entriesList = document.getElementById('entriesList');
        const totalBancoHorasSpan = document.getElementById('totalBancoHoras');
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        let entries = []; // Array para armazenar os registros de ponto

        // --- Fun√ß√µes Auxiliares de Tempo ---
        function timeToMinutes(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours * 60 + minutes;
        }

        function minutesToTime(totalMinutes) {
            const sign = totalMinutes < 0 ? '-' : '';
            totalMinutes = Math.abs(totalMinutes);
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            return `${sign}${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;
        }

        function calculateTimeDifference(start, end) {
            const startMinutes = timeToMinutes(start);
            const endMinutes = timeToMinutes(end);
            return endMinutes - startMinutes;
        }

        // --- Fun√ß√µes de Persist√™ncia (LocalStorage) ---
        function saveEntries() {
            localStorage.setItem('pointEntries', JSON.stringify(entries));
        }

        function loadEntries() {
            const savedEntries = localStorage.getItem('pointEntries');
            if (savedEntries) {
                entries = JSON.parse(savedEntries);
                renderEntries();
            }
        }

        // --- Renderiza√ß√£o e C√°lculos ---
        function renderEntries() {
            entriesList.innerHTML = '';
            let totalBancoHorasMin = 0;

            entries.forEach((entry, index) => {
                // Recalcula as horas para cada entrada com a toler√¢ncia atual
                const entradaPrevistaMin = timeToMinutes(entry.entradaPrevista);
                const saidaPrevistaMin = timeToMinutes(entry.saidaPrevista);
                const entradaRealMin = timeToMinutes(entry.entradaReal);
                const saidaRealMin = timeToMinutes(entry.saidaReal);
                const toleranciaEntradaMin = parseInt(entry.toleranciaEntrada || 0); // Pega a toler√¢ncia salva
                const toleranciaSaidaMin = parseInt(entry.toleranciaSaida || 0);     // Pega a toler√¢ncia salva

                // Aplica a toler√¢ncia
                let entradaConsideradaMin = entradaRealMin;
                if (entradaRealMin > entradaPrevistaMin && (entradaRealMin - entradaPrevistaMin) <= toleranciaEntradaMin) {
                    entradaConsideradaMin = entradaPrevistaMin; // Considera como se tivesse entrado no hor√°rio previsto
                } else if (entradaRealMin < entradaPrevistaMin && (entradaPrevistaMin - entradaRealMin) <= toleranciaEntradaMin) {
                    entradaConsideradaMin = entradaPrevistaMin; // Considera como se tivesse entrado no hor√°rio previsto
                }

                let saidaConsideradaMin = saidaRealMin;
                if (saidaRealMin < saidaPrevistaMin && (saidaPrevistaMin - saidaRealMin) <= toleranciaSaidaMin) {
                    saidaConsideradaMin = saidaPrevistaMin; // Considera como se tivesse sa√≠do no hor√°rio previsto
                } else if (saidaRealMin > saidaPrevistaMin && (saidaRealMin - saidaPrevistaMin) <= toleranciaSaidaMin) {
                    saidaConsideradaMin = saidaPrevistaMin; // Considera como se tivesse sa√≠do no hor√°rio previsto
                }

                const horasTrabalhadasDiaMin = calculateTimeDifference(minutesToTime(entradaConsideradaMin), minutesToTime(saidaConsideradaMin));
                const horasPrevistasDiaMin = calculateTimeDifference(entry.entradaPrevista, entry.saidaPrevista);
                const horasDevidasExtrasDiaMin = horasTrabalhadasDiaMin - horasPrevistasDiaMin;

                totalBancoHorasMin += horasDevidasExtrasDiaMin;

                entry.horasTrabalhadasDia = minutesToTime(horasTrabalhadasDiaMin);
                entry.horasDevidasExtrasDia = minutesToTime(horasDevidasExtrasDiaMin);
                entry.bancoHorasAcumulado = minutesToTime(totalBancoHorasMin); // Atualiza o acumulado para cada entrada

                const entryCard = document.createElement('div');
                entryCard.classList.add('entry-card');
                entryCard.innerHTML = `
                    <div class="entry-info">
                        <p><strong>Data:</strong> ${new Date(entry.data + 'T00:00:00').toLocaleDateString('pt-BR')}</p>
                        <p><strong>Entrada Prevista:</strong> ${entry.entradaPrevista} | <strong>Sa√≠da Prevista:</strong> ${entry.saidaPrevista}</p>
                        <p><strong>Entrada Real:</strong> ${entry.entradaReal} | <strong>Sa√≠da Real:</strong> ${entry.saidaReal}</p>
                        <p><strong>Toler√¢ncia Entrada:</strong> ${entry.toleranciaEntrada} min | <strong>Toler√¢ncia Sa√≠da:</strong> ${entry.toleranciaSaida} min</p>
                        <p><strong>Horas Trabalhadas:</strong> ${entry.horasTrabalhadasDia}</p>
                        <p><strong>Horas Devidas/Extras:</strong> ${entry.horasDevidasExtrasDia}</p>
                        <p><strong>Banco de Horas Acumulado:</strong> ${entry.bancoHorasAcumulado}</p>
                    </div>
                    <div class="entry-actions">
                        <button data-index="${index}">üóëÔ∏è</button>
                    </div>
                `;
                entriesList.appendChild(entryCard);
            });

            totalBancoHorasSpan.textContent = minutesToTime(totalBancoHorasMin);
            saveEntries(); // Salva os registros atualizados
        }

        // --- Adicionar Novo Registro ---
        function addEntry() {
            const data = dataInput.value;
            const entradaPrevista = entradaPrevistaInput.value;
            const saidaPrevista = saidaPrevistaInput.value;
            const entradaReal = entradaRealInput.value;
            const saidaReal = saidaRealInput.value;
            const toleranciaEntrada = toleranciaEntradaInput.value; // Pega o valor do input
            const toleranciaSaida = toleranciaSaidaInput.value;     // Pega o valor do input

            if (!data || !entradaPrevista || !saidaPrevista || !entradaReal || !saidaReal) {
                alert('Por favor, preencha todos os campos de data e hora.');
                return;
            }

            const newEntry = {
                data,
                entradaPrevista,
                saidaPrevista,
                entradaReal,
                saidaReal,
                toleranciaEntrada, // Salva a toler√¢ncia no registro
                toleranciaSaida,   // Salva a toler√¢ncia no registro
                horasTrabalhadasDia: '', // Ser√° calculado em renderEntries
                horasDevidasExtrasDia: '', // Ser√° calculado em renderEntries
                bancoHorasAcumulado: '' // Ser√° calculado em renderEntries
            };
            entries.push(newEntry);
            renderEntries();
            // Opcional: Limpa os campos de entrada, exceto a data para facilitar entradas sequenciais
            // entradaInput.value = ENTRADA_PREVISTA;
            // saidaInput.value = SAIDA_PREVISTA;
        }

        function deleteEntry(index) {
            if (confirm('Tem certeza que deseja remover este registro?')) {
                entries.splice(index, 1);
                renderEntries();
            }
        }

        function clearAllEntries() {
            if (confirm('Tem certeza que deseja limpar TODOS os registros? Esta a√ß√£o √© irrevers√≠vel.')) {
                entries = [];
                renderEntries();
                localStorage.removeItem('pointEntries');
            }
        }

        // --- Gera√ß√£o de Excel ---
        function generateExcel() {
            if (entries.length === 0) {
                alert('N√£o h√° registros para gerar o Excel.');
                return;
            }

            // Prepara os dados para o Excel
            const dataForExcel = entries.map(entry => ({
                'Data': new Date(entry.data + 'T00:00:00').toLocaleDateString('pt-BR'),
                'Entrada Prevista': entry.entradaPrevista,
                'Sa√≠da Prevista': entry.saidaPrevista,
                'Entrada Real': entry.entradaReal,
                'Sa√≠da Real': entry.saidaReal,
                'Toler√¢ncia Entrada (min)': entry.toleranciaEntrada, // Adicionado ao Excel
                'Toler√¢ncia Sa√≠da (min)': entry.toleranciaSaida,     // Adicionado ao Excel
                'Horas Trabalhadas (Dia)': entry.horasTrabalhadasDia,
                'Horas Devidas/Extras (Dia)': entry.horasDevidasExtrasDia,
                'Banco de Horas Acumulado': entry.bancoHorasAcumulado
            }));

            const ws = XLSX.utils.json_to_sheet(dataForExcel);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Controle de Ponto");

            // Define o nome do arquivo com o per√≠odo (21 do m√™s anterior ao 20 do m√™s atual)
            const today = new Date();
            const currentDay = today.getDate();
            let startMonth, startYear, endMonth, endYear;

            if (currentDay > 20) {
                // Se estamos entre o dia 21 e o final do m√™s, o ciclo atual come√ßou no dia 21 deste m√™s
                startMonth = today.getMonth();
                startYear = today.getFullYear();
                endMonth = (startMonth + 1) % 12;
                endYear = (endMonth === 0) ? startYear + 1 : startYear;
            } else {
                // Se estamos entre o dia 1 e 20, o ciclo atual come√ßou no dia 21 do m√™s anterior
                endMonth = today.getMonth();
                endYear = today.getFullYear();
                startMonth = (endMonth === 0) ? 11 : endMonth - 1;
                startYear = (endMonth === 0) ? endYear - 1 : endYear;
            }

            const startDate = new Date(startYear, startMonth, 21);
            const endDate = new Date(endYear, endMonth, 20);

            const fileName = `Controle_Ponto_${startDate.toLocaleDateString('pt-BR', { month: 'short', year: 'numeric' }).replace(/\s/g, '_')}_a_${endDate.toLocaleDateString('pt-BR', { month: 'short', year: 'numeric' }).replace(/\s/g, '_')}.xlsx`;

            XLSX.writeFile(wb, fileName);
        }

        // --- Gerenciamento de Tema (Claro/Escuro) ---
        function applyTheme(isDarkMode) {
            if (isDarkMode) {
                body.classList.add('dark-mode');
                themeToggle.textContent = 'Modo Claro';
                localStorage.setItem('theme', 'dark');
            } else {
                body.classList.remove('dark-mode');
                themeToggle.textContent = 'Modo Escuro';
                localStorage.setItem('theme', 'light');
            }
        }

        function toggleTheme() {
            const isDarkMode = body.classList.contains('dark-mode');
            applyTheme(!isDarkMode);
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            // Como voc√™ prefere o tema claro como padr√£o, vamos garantir isso.
            if (savedTheme === 'dark') {
                applyTheme(true);
            } else {
                applyTheme(false); // Padr√£o para claro
            }
        }

        // --- Event Listeners ---
        addEntryBtn.addEventListener('click', addEntry);
        clearEntriesBtn.addEventListener('click', clearAllEntries);
        generateExcelBtn.addEventListener('click', generateExcel);
        entriesList.addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON' && event.target.dataset.index) {
                deleteEntry(parseInt(event.target.dataset.index));
            }
        });
        themeToggle.addEventListener('click', toggleTheme);

        // --- Inicializa√ß√£o ---
        document.addEventListener('DOMContentLoaded', () => {
            // Define a data atual como padr√£o no campo de data
            dataInput.valueAsDate = new Date();
            loadTheme();
            loadEntries();
        });

        // --- Registro do Service Worker (para PWA) ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/Registro-de-Ponto/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha no registro do ServiceWorker:', error);
                    });
            });
        }
    </script>
</body>
</html>
